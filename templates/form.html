
<!--- Form for displaying fileds for Folder and Subfolder selection-->

 <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <title>Django </title>
  </head>
  <body>
<div class="container">
<br> 
  <form action="list/" method="post" id="display_form" sub-directories-url="{% url 'sub_directories' %}" >
    {% csrf_token%}
        <div class="form-group input-group">
      <div class="input-group-prepend">
        <span class="input-group-text"> <i class="fa fa-building"></i> </span>
    </div>
    <select class="form-control" id="select_id">
      <option > select the folder</option>
       {% for i in list_dirc %}
          <option value="{{ i }}">{{ i }}</option>
    {% endfor %}
    </select>
   </div> 
   <div class="form-group input-group">
    <div class="input-group-prepend">
        <span class="input-group-text"> <i class="fa fa-user"></i> </span>
     </div>
        <select class="form-control" id="id_direc" sub-directories-url="{% url 'sub_directories1' %}">
      <option > select the folder</option>
       {% for i in sub_folders %}
          <option value="{{ i }}">{{ i }}</option>
        {% endfor %}
    </select>
    </div> <!-- form-group end.// -->


     <div class="form-group input-group">
    <div class="input-group-prepend">
        <span class="input-group-text"> <i class="fa fa-user"></i> </span>
     </div>
        <select class="form-control" id="id_direct">
      <option > select the folder</option>
       {% for i in sub_folders2 %}
          <option value="{{ i }}">{{ i }}</option>
        {% endfor %}
    </select>
    </div> <!-- form-group end.// -->
  
                                       
    <div class="form-group">
      
        <button   type="submit" class="btn btn-primary btn-block" id="submit_dir"> Submit </button>
      
    </div> <!-- form-group// -->      
   
  </form>
        </div>
      </div>
    </div>
  </body>


</html>




<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>


  <script>
    /////////////  Ajax call to subfolders filtering  URL 

    $("#select_id").change(function () {
      var url=$("#display_form").attr("sub-directories-url");
     var  id = select_id.value;
      console.log("hhhhhhhhhhh")    
      $.ajax({

         url: url,
         type: 'GET',
        data: {'id':id,
        csrfmiddlewaretoken: '{{ csrf_token }}'},
        contentType: 'plain/text',
 
        success: function (result) {

          console.log($("#id_direc").html(result));
        }
      });

    });
  </script>



   <script>
    /////////////  Ajax call to subfolders filtering  URL 

    $("#id_direc").change(function () {
     // var url=$("#display_form").attr("sub-directories-url") ;
     var url='ajax/load-sub_directories1/'
      console.log(url)
     var  id = id_direc.value;
     console.log(id)
      console.log("hiiiiiiiiiiiii")    
      $.ajax({

         url: url,
         type: 'GET',
        data: {'id':id,
        csrfmiddlewaretoken: '{{ csrf_token }}'},
        contentType: 'plain/text',
 
        success: function (result) {

          console.log($("#id_direct").html(result));
        }
      });

    });
  </script>



 

    





   

           



